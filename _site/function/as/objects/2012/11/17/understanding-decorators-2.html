<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

<!-- Begin Jekyll SEO tag v2.4.0 -->
<title>Understanding decorators | Agiliq Blogs</title>
<meta name="generator" content="Jekyll v3.7.3" />
<meta property="og:title" content="Understanding decorators" />
<meta name="author" content="akshar" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Understanding decorators in Python ###We will divide this post into two topics Functions are objects and they can be passed around. Writing few decorators As usual, I will be trying out the code in ipython and I suggest you to do the same. ###Functions can be passed around similar to any other object in Python. If you are already familiar with this, you can skip to next section. Let’s first write a class. &gt;&gt;&gt; class A(object): ... def __init__(self, a): ... self.a = a ... Let’s create an instance of this class. &gt;&gt;&gt; obj = A(5) &gt;&gt;&gt; print obj.a 5 #output Let’s write a function that takes an object, increase the value of instance variable ‘a’ by 10 and return the object. &gt;&gt;&gt; def func(some_obj): ... some_obj.a = some_obj.a + 10 ... return some_obj ... In function func, our assumption is that we will always pass it an object as argument and this object will have an instance variable ‘a’. Let’s pass the created object obj of class A to this function and take the return value of this function in a variable named obj2. &gt;&gt;&gt; obj2 = func(obj) &gt;&gt;&gt; print obj2.a 15 We wrote a function ‘func’ that takes an object as an argument, manipulates it and also returns that object. We passed around the object ‘obj’ of class A. In Python, functions are objects. They can be passed around similar to any other object. Let’s see this through an example. Let’s write a function that prints something. &gt;&gt;&gt; def hello_world(): ... print &quot;Hello World&quot; ... Use this function. &gt;&gt;&gt; hello_world() Hello World #output Since functions are objects they can be assigned to any variable. &gt;&gt;&gt; hello_world_two = hello_world We assigned hello_world, which is a function, to another variable named hello_world_two. Use hello_world_two &gt;&gt;&gt; hello_world_two() Hello World #It gives the same output as hello_world() Now we want to see how to pass around this function. For that, we want to write a new function that takes function ‘hello_world’ as an argument and then uses it. &gt;&gt;&gt; def use_hello_world(some_func): ... print &quot;This function takes a function as an argument and uses it&quot; ... print &quot;We will send function hello_world to this function as an argument and will use it in this function&quot; ... some_func() #This is a function call. So our assumption is &#39;some_func&#39; must be a function. ... Let’s use function use_hello_world. &gt;&gt;&gt; use_hello_world(hello_world) This function takes a function as an argument and uses it We will send function hello_world to this function as an argument and will use it in this function Hello World #This is because of the print stament we have in hello_world() ####What happened here? hello_world is the name of the first function we wrote. We wanted to see how to pass around functions. We wrote another function named use_hello_world. use_hello_world expects one argument. use_hello_world has three lines in its body. The first two lines of use_hello_world are just print staments. Third line of use_hello_world used the argument that it recieved. Notice the parenthesis after some_func. So. assumption with use_hello_world is that the argument that will be passed to it will be a function. ####Calling use_hello_world We passed one argument which is function hello_world to use_hello_world. In use_hello_world, received argument hello_world was assigned to variable named some_func. Two print statements in use_hello_world were printed. some_func which refers to the function pointed to by hello_world was called and the print statement in hello_world was executed. Also functions can be returned from another function. Let’s see it. &gt;&gt;&gt; def some_func(): ... print &quot;This function defines an inner function&quot; ... def say_hello(): ... print &quot;Hello Duniya&quot; ... print &quot;A function can be returned from a function&quot; ... return say_hello ... ####What happens in function some_func? First line is a print statement We define an inner function named say_hello inside this function. We have a print stament inside say_hello. Fourth line is a print statement of function some_func. say_hello has only one line in its body which is Hello Duniya We return function say_hello. Let’s see how say_hello can be used. &gt;&gt;&gt; abc = some_func() This function defines an inner function #output A function can be returned from a function #output ####What happened on calling some_func? As we call some_func, two print statements inside it gets executed. However, we do not see third line inside some_func i.e the print statement of say_hello in the output. This is because when we call some_func, the inner function inside it is only defined but it is not called. Last line of some_func returns the function defined inside it which is say_hello. Then this say_hello gets assigned to abc. Now abc and say_hello are referring to the same function. Using abc &gt;&gt;&gt; abc() Hello Duniya #output So now we are comfortable with passing functions as arguments as well as defining an inner function inside another function and returning it. ###Writing a simple decorator Decorators are functions that recieve a function as an argument and return another function as return value. Let’s first write a function without decorator. &gt;&gt;&gt; def divide(numerator, denominator): ... return numerator/denominator ... Let’s use this function few times. &gt;&gt;&gt; divide(4, 2) 2 #output &gt;&gt;&gt; divide(4, 0) Traceback (most recent call last): File &quot;&lt;ipython-input-11-9552c1bdcb43&gt;&quot;, line 1, in &lt;module&gt; divide(4, 0) File &quot;&lt;ipython-input-9-e63f86a52419&gt;&quot;, line 2, in divide return numerator/denominator ZeroDivisionError: integer division or modulo by zero So, our second run of divide() raised an error. We can fix it by having an if condition in divide() and making sure that the denominator is not zero. However here we want to understand decorators, so we will fix it using a decorator. We will see a practical use of decorator later. So, what we intend to do is, if the denominator is 0 then we do not perform the division and just return 0. If the denominator is not 0 then perform the division. Let’s write a decorator. We will go through every line of the decorator once we have defined the decorator, so just go ahead and define the decorator written below. &gt;&gt;&gt; def decorate(function_to_be_decorated): ... def another_function(num, den): ... if den==0: ... return 0 ... else: ... result = function_to_be_decorated(num, den) ... return result ... return another_function ####Explanation: As we said at beginning, a decorator is just a function which recieves a function as an argument and returns some other function as a return value. A decorator is just a function, so everything applicable to a function is applicable to a decorator. A decorator is a special type of function. We defined a function named decorate. It is a decorator as well but we will keep calling it as function for sometime. This function named decorate expects one argument to be passed to it as we can see from the signature of decorate. The argument that we pass to this function decorate will be captured in the variable function_to_be_decorated. The argument passed to decorate must be a function itself. (The assumption for a decorator is that we will pass a function as argument to it). Since a function will be passed as an argument to decorate, function_to_be_decorated will refer to that passed function. We define a function named another_function inside decorate. The purpose of writing this decorator is to help us fix function divide(). So the signature of another_function must match the signature of divide. Since divide has two parameters, so another_function must also have two parameters. We have named those parameters num and den. Ignore the body of another_function for now, we will come to it very soon. At the end we return function named another_function from decorate. So we see that a decorator also returns a function. And it returns the same function that it defined inside itself. So here we defined another_function inside our decorator decorate and returned that same function from the decorator. Read the first point again and verify that everything we said about decorators is true. Let’s use the decorator that we just defined. &gt;&gt;&gt; divide = decorate(divide) ####What happened when we wrote divide = decorate(divide)? #####Only concentrate on left hand side of this assignment for now i.e decorate(divide) part. We passed the function divide to decorator named decorate. In decorator decorate, function divide gets assigned to variable function_to_be_decorated. So function_to_be_decorated start referring to divide. Let’s start calling it old divide now. So, function_to_be_decorated refers to old divide. Old divide has only one statement in it which is “return numerator/denominator”. Make sure you understood this statement, we need it later. #####Talking about right hand side of this assignment. Whatever is returned from decorate is assigned to divide. decorate returns the reference to function named another_function, which gets assigned to divide. Now, divide starts referring to another_function and is no more referring to the version of divide as defined by us initially. But no worries, old/actual version of divide i.e the one which had only one statement “return numerator/denominator” is still being referenced by function_to_be_decorated. So, it is still reachable and usable. Using new divide. &gt;&gt;&gt; divide(4, 2) 2 #output ####Explanation: Now divide refers to another_function. So, calling divide actually calls another_function. another_function has parameters num and den. Passing the arguments, assigns 4 to num and 2 to den. We check if den equals 0. Here, den did not equal 0. So, we reach else part of another_function. In else part, we use function_to_be_decorated. But, remember function_to_be_decorated refers to older/actual version of divide. The arguments recieved in another_function i.e num and den are passed as it is to function_to_be_decorated i.e actual version of divide. So, 4 and 2 are passed to function_to_be_decorated i.e to old divide. In old divide 4 gets assigned to variable numerator and 2 gets assigned to variable denominator. And the actual version of divide just divides the numerator by denominator and returns it. We get the value returned from function_to_be_decorated i.e old divide into varaible result and return it from function another_function. Using new divide again. &gt;&gt;&gt; divide(4, 0) 0 #output ####Explanation: Passing the arguments, assigns 4 to num and 0 to den. We check if den equals 0. Here if condition evaluates to True and we return 0. So, here function_to_be_decorated i.e old divide was not called after we saw that variable den is 0. The part which had to be understood is done. If you have understood till here, everything here onwards is as easy as pie. Though we achieved what we wanted to, we did not use the decorator syntax for changing the behaviour of our original/old divide function. Let’s redefine divide so that it becomes as it was initially. &gt;&gt;&gt; def divide(numerator, denominator): ... return numerator/denominator Pass denominator as 0 to this function to verify that this doesn’t work. &gt;&gt;&gt; divide(4, 0) Traceback (most recent call last): File &quot;&lt;ipython-input-19-9552c1bdcb43&gt;&quot;, line 1, in &lt;module&gt; divide(4, 0) File &quot;&lt;ipython-input-18-e63f86a52419&gt;&quot;, line 2, in divide return numerator/denominator ZeroDivisionError: integer division or modulo by zero Earlier, to fix this thing we used “divide=decorate(divide)”. This time we will use the exact decorator syntax. Redefine divide &gt;&gt;&gt; @decorate ... def divide(numerator, denominator): ... return numerator/denominator Yes, you spotted it. We need to put @decorate above the function definition. Now try dividing by 0. &gt;&gt;&gt; divide(4, 0) 0 #output Voila, we fixed what we intended using decorator syntax. ####What is this @decorate? Interpretor comes across the statement @decorate. So, it knows the function which follows @decorate i.e function named divide needs to be decorated using the decorator named decorate. It reads the function definition on next line i.e function definition for divide and does the usual stuff as it does for any undecorated function. Nothing special happens at this stage. But once the function definition is read, interpreter will do an extra operation. It will execute one more statement after function definition. And the extra statement it executes is divide=decorate(divide). This is the step which we performed manually earlier when we were not using the decorator syntax. But with the decorator syntax, the interpreter takes care of that step for us. Let’s write one more decorator. This decorator needs to check that the denominator is greater than numerator and then only perform the division, otherwise division should not be performed and just return 0. Weird requirement, isn’t it? &gt;&gt;&gt; def decorate_den_less_than_num(function): ... print &quot;Decorator to check denominator less than numerator applied&quot; ... def check_den_less_than_num(num, den): ... if den&gt;num: ... print &quot;Denominator &gt; Numerator. So dont call the actual function&quot; ... return 0 ... else: ... print &quot;Denominator &lt;= Numerator. So call actual function&quot; ... return function(num, den) ... return check_den_less_than_num ... We wrote the decorator keeping in mind that this decorator has to be applied to a function which expects two arguments. So the function defined inside decorator i.e check_den_less_than_num should also take two arguments and then it should make proper check and based on that it should call the actual function. We have some print statements to see what happens at different stages. Let’s rewrite function divide applying the above written decorator to it. &gt;&gt;&gt; @decorate_den_less_than_num ... def divide(numerator, denominator): ... return numerator/denominator ... Decorator to check denominator less than numerator applied #output ####Why we got the output “Decorator to che………… applied” ? As we discussed, interpreter saw a decorator syntax above the function divide. It did nothing till the function body is defined. But after function body was defined, interpreter would have executed one more statement which is divide=decorate_den_less_than_num(divide). This would have made a call to decorate_den_less_than_num and so the body of decorate_den_less_than_num was executed and so we saw the print statement inside the decorator. Make some calls to divide to see how it behaves. &gt;&gt;&gt; divide(4, 2) Denominator &lt;= Numerator. So call actual function 2 &gt;&gt;&gt; divide(4, 5) Denominator &gt; Numerator. So dont call the actual function 0 I wanted this tutorial to be acesible to beginners so I was unable to do justice to this topic. I plan to write more about decorators. Please let me know if this would help you. Things I want to write about. Chaining decorators Understanding __call__ and class based decorators Some practical examples of decorator" />
<meta property="og:description" content="Understanding decorators in Python ###We will divide this post into two topics Functions are objects and they can be passed around. Writing few decorators As usual, I will be trying out the code in ipython and I suggest you to do the same. ###Functions can be passed around similar to any other object in Python. If you are already familiar with this, you can skip to next section. Let’s first write a class. &gt;&gt;&gt; class A(object): ... def __init__(self, a): ... self.a = a ... Let’s create an instance of this class. &gt;&gt;&gt; obj = A(5) &gt;&gt;&gt; print obj.a 5 #output Let’s write a function that takes an object, increase the value of instance variable ‘a’ by 10 and return the object. &gt;&gt;&gt; def func(some_obj): ... some_obj.a = some_obj.a + 10 ... return some_obj ... In function func, our assumption is that we will always pass it an object as argument and this object will have an instance variable ‘a’. Let’s pass the created object obj of class A to this function and take the return value of this function in a variable named obj2. &gt;&gt;&gt; obj2 = func(obj) &gt;&gt;&gt; print obj2.a 15 We wrote a function ‘func’ that takes an object as an argument, manipulates it and also returns that object. We passed around the object ‘obj’ of class A. In Python, functions are objects. They can be passed around similar to any other object. Let’s see this through an example. Let’s write a function that prints something. &gt;&gt;&gt; def hello_world(): ... print &quot;Hello World&quot; ... Use this function. &gt;&gt;&gt; hello_world() Hello World #output Since functions are objects they can be assigned to any variable. &gt;&gt;&gt; hello_world_two = hello_world We assigned hello_world, which is a function, to another variable named hello_world_two. Use hello_world_two &gt;&gt;&gt; hello_world_two() Hello World #It gives the same output as hello_world() Now we want to see how to pass around this function. For that, we want to write a new function that takes function ‘hello_world’ as an argument and then uses it. &gt;&gt;&gt; def use_hello_world(some_func): ... print &quot;This function takes a function as an argument and uses it&quot; ... print &quot;We will send function hello_world to this function as an argument and will use it in this function&quot; ... some_func() #This is a function call. So our assumption is &#39;some_func&#39; must be a function. ... Let’s use function use_hello_world. &gt;&gt;&gt; use_hello_world(hello_world) This function takes a function as an argument and uses it We will send function hello_world to this function as an argument and will use it in this function Hello World #This is because of the print stament we have in hello_world() ####What happened here? hello_world is the name of the first function we wrote. We wanted to see how to pass around functions. We wrote another function named use_hello_world. use_hello_world expects one argument. use_hello_world has three lines in its body. The first two lines of use_hello_world are just print staments. Third line of use_hello_world used the argument that it recieved. Notice the parenthesis after some_func. So. assumption with use_hello_world is that the argument that will be passed to it will be a function. ####Calling use_hello_world We passed one argument which is function hello_world to use_hello_world. In use_hello_world, received argument hello_world was assigned to variable named some_func. Two print statements in use_hello_world were printed. some_func which refers to the function pointed to by hello_world was called and the print statement in hello_world was executed. Also functions can be returned from another function. Let’s see it. &gt;&gt;&gt; def some_func(): ... print &quot;This function defines an inner function&quot; ... def say_hello(): ... print &quot;Hello Duniya&quot; ... print &quot;A function can be returned from a function&quot; ... return say_hello ... ####What happens in function some_func? First line is a print statement We define an inner function named say_hello inside this function. We have a print stament inside say_hello. Fourth line is a print statement of function some_func. say_hello has only one line in its body which is Hello Duniya We return function say_hello. Let’s see how say_hello can be used. &gt;&gt;&gt; abc = some_func() This function defines an inner function #output A function can be returned from a function #output ####What happened on calling some_func? As we call some_func, two print statements inside it gets executed. However, we do not see third line inside some_func i.e the print statement of say_hello in the output. This is because when we call some_func, the inner function inside it is only defined but it is not called. Last line of some_func returns the function defined inside it which is say_hello. Then this say_hello gets assigned to abc. Now abc and say_hello are referring to the same function. Using abc &gt;&gt;&gt; abc() Hello Duniya #output So now we are comfortable with passing functions as arguments as well as defining an inner function inside another function and returning it. ###Writing a simple decorator Decorators are functions that recieve a function as an argument and return another function as return value. Let’s first write a function without decorator. &gt;&gt;&gt; def divide(numerator, denominator): ... return numerator/denominator ... Let’s use this function few times. &gt;&gt;&gt; divide(4, 2) 2 #output &gt;&gt;&gt; divide(4, 0) Traceback (most recent call last): File &quot;&lt;ipython-input-11-9552c1bdcb43&gt;&quot;, line 1, in &lt;module&gt; divide(4, 0) File &quot;&lt;ipython-input-9-e63f86a52419&gt;&quot;, line 2, in divide return numerator/denominator ZeroDivisionError: integer division or modulo by zero So, our second run of divide() raised an error. We can fix it by having an if condition in divide() and making sure that the denominator is not zero. However here we want to understand decorators, so we will fix it using a decorator. We will see a practical use of decorator later. So, what we intend to do is, if the denominator is 0 then we do not perform the division and just return 0. If the denominator is not 0 then perform the division. Let’s write a decorator. We will go through every line of the decorator once we have defined the decorator, so just go ahead and define the decorator written below. &gt;&gt;&gt; def decorate(function_to_be_decorated): ... def another_function(num, den): ... if den==0: ... return 0 ... else: ... result = function_to_be_decorated(num, den) ... return result ... return another_function ####Explanation: As we said at beginning, a decorator is just a function which recieves a function as an argument and returns some other function as a return value. A decorator is just a function, so everything applicable to a function is applicable to a decorator. A decorator is a special type of function. We defined a function named decorate. It is a decorator as well but we will keep calling it as function for sometime. This function named decorate expects one argument to be passed to it as we can see from the signature of decorate. The argument that we pass to this function decorate will be captured in the variable function_to_be_decorated. The argument passed to decorate must be a function itself. (The assumption for a decorator is that we will pass a function as argument to it). Since a function will be passed as an argument to decorate, function_to_be_decorated will refer to that passed function. We define a function named another_function inside decorate. The purpose of writing this decorator is to help us fix function divide(). So the signature of another_function must match the signature of divide. Since divide has two parameters, so another_function must also have two parameters. We have named those parameters num and den. Ignore the body of another_function for now, we will come to it very soon. At the end we return function named another_function from decorate. So we see that a decorator also returns a function. And it returns the same function that it defined inside itself. So here we defined another_function inside our decorator decorate and returned that same function from the decorator. Read the first point again and verify that everything we said about decorators is true. Let’s use the decorator that we just defined. &gt;&gt;&gt; divide = decorate(divide) ####What happened when we wrote divide = decorate(divide)? #####Only concentrate on left hand side of this assignment for now i.e decorate(divide) part. We passed the function divide to decorator named decorate. In decorator decorate, function divide gets assigned to variable function_to_be_decorated. So function_to_be_decorated start referring to divide. Let’s start calling it old divide now. So, function_to_be_decorated refers to old divide. Old divide has only one statement in it which is “return numerator/denominator”. Make sure you understood this statement, we need it later. #####Talking about right hand side of this assignment. Whatever is returned from decorate is assigned to divide. decorate returns the reference to function named another_function, which gets assigned to divide. Now, divide starts referring to another_function and is no more referring to the version of divide as defined by us initially. But no worries, old/actual version of divide i.e the one which had only one statement “return numerator/denominator” is still being referenced by function_to_be_decorated. So, it is still reachable and usable. Using new divide. &gt;&gt;&gt; divide(4, 2) 2 #output ####Explanation: Now divide refers to another_function. So, calling divide actually calls another_function. another_function has parameters num and den. Passing the arguments, assigns 4 to num and 2 to den. We check if den equals 0. Here, den did not equal 0. So, we reach else part of another_function. In else part, we use function_to_be_decorated. But, remember function_to_be_decorated refers to older/actual version of divide. The arguments recieved in another_function i.e num and den are passed as it is to function_to_be_decorated i.e actual version of divide. So, 4 and 2 are passed to function_to_be_decorated i.e to old divide. In old divide 4 gets assigned to variable numerator and 2 gets assigned to variable denominator. And the actual version of divide just divides the numerator by denominator and returns it. We get the value returned from function_to_be_decorated i.e old divide into varaible result and return it from function another_function. Using new divide again. &gt;&gt;&gt; divide(4, 0) 0 #output ####Explanation: Passing the arguments, assigns 4 to num and 0 to den. We check if den equals 0. Here if condition evaluates to True and we return 0. So, here function_to_be_decorated i.e old divide was not called after we saw that variable den is 0. The part which had to be understood is done. If you have understood till here, everything here onwards is as easy as pie. Though we achieved what we wanted to, we did not use the decorator syntax for changing the behaviour of our original/old divide function. Let’s redefine divide so that it becomes as it was initially. &gt;&gt;&gt; def divide(numerator, denominator): ... return numerator/denominator Pass denominator as 0 to this function to verify that this doesn’t work. &gt;&gt;&gt; divide(4, 0) Traceback (most recent call last): File &quot;&lt;ipython-input-19-9552c1bdcb43&gt;&quot;, line 1, in &lt;module&gt; divide(4, 0) File &quot;&lt;ipython-input-18-e63f86a52419&gt;&quot;, line 2, in divide return numerator/denominator ZeroDivisionError: integer division or modulo by zero Earlier, to fix this thing we used “divide=decorate(divide)”. This time we will use the exact decorator syntax. Redefine divide &gt;&gt;&gt; @decorate ... def divide(numerator, denominator): ... return numerator/denominator Yes, you spotted it. We need to put @decorate above the function definition. Now try dividing by 0. &gt;&gt;&gt; divide(4, 0) 0 #output Voila, we fixed what we intended using decorator syntax. ####What is this @decorate? Interpretor comes across the statement @decorate. So, it knows the function which follows @decorate i.e function named divide needs to be decorated using the decorator named decorate. It reads the function definition on next line i.e function definition for divide and does the usual stuff as it does for any undecorated function. Nothing special happens at this stage. But once the function definition is read, interpreter will do an extra operation. It will execute one more statement after function definition. And the extra statement it executes is divide=decorate(divide). This is the step which we performed manually earlier when we were not using the decorator syntax. But with the decorator syntax, the interpreter takes care of that step for us. Let’s write one more decorator. This decorator needs to check that the denominator is greater than numerator and then only perform the division, otherwise division should not be performed and just return 0. Weird requirement, isn’t it? &gt;&gt;&gt; def decorate_den_less_than_num(function): ... print &quot;Decorator to check denominator less than numerator applied&quot; ... def check_den_less_than_num(num, den): ... if den&gt;num: ... print &quot;Denominator &gt; Numerator. So dont call the actual function&quot; ... return 0 ... else: ... print &quot;Denominator &lt;= Numerator. So call actual function&quot; ... return function(num, den) ... return check_den_less_than_num ... We wrote the decorator keeping in mind that this decorator has to be applied to a function which expects two arguments. So the function defined inside decorator i.e check_den_less_than_num should also take two arguments and then it should make proper check and based on that it should call the actual function. We have some print statements to see what happens at different stages. Let’s rewrite function divide applying the above written decorator to it. &gt;&gt;&gt; @decorate_den_less_than_num ... def divide(numerator, denominator): ... return numerator/denominator ... Decorator to check denominator less than numerator applied #output ####Why we got the output “Decorator to che………… applied” ? As we discussed, interpreter saw a decorator syntax above the function divide. It did nothing till the function body is defined. But after function body was defined, interpreter would have executed one more statement which is divide=decorate_den_less_than_num(divide). This would have made a call to decorate_den_less_than_num and so the body of decorate_den_less_than_num was executed and so we saw the print statement inside the decorator. Make some calls to divide to see how it behaves. &gt;&gt;&gt; divide(4, 2) Denominator &lt;= Numerator. So call actual function 2 &gt;&gt;&gt; divide(4, 5) Denominator &gt; Numerator. So dont call the actual function 0 I wanted this tutorial to be acesible to beginners so I was unable to do justice to this topic. I plan to write more about decorators. Please let me know if this would help you. Things I want to write about. Chaining decorators Understanding __call__ and class based decorators Some practical examples of decorator" />
<link rel="canonical" href="http://localhost:4000/function/as/objects/2012/11/17/understanding-decorators-2.html" />
<meta property="og:url" content="http://localhost:4000/function/as/objects/2012/11/17/understanding-decorators-2.html" />
<meta property="og:site_name" content="Agiliq Blogs" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2012-11-17T14:43:53+05:30" />
<script type="application/ld+json">
{"description":"Understanding decorators in Python ###We will divide this post into two topics Functions are objects and they can be passed around. Writing few decorators As usual, I will be trying out the code in ipython and I suggest you to do the same. ###Functions can be passed around similar to any other object in Python. If you are already familiar with this, you can skip to next section. Let’s first write a class. &gt;&gt;&gt; class A(object): ... def __init__(self, a): ... self.a = a ... Let’s create an instance of this class. &gt;&gt;&gt; obj = A(5) &gt;&gt;&gt; print obj.a 5 #output Let’s write a function that takes an object, increase the value of instance variable ‘a’ by 10 and return the object. &gt;&gt;&gt; def func(some_obj): ... some_obj.a = some_obj.a + 10 ... return some_obj ... In function func, our assumption is that we will always pass it an object as argument and this object will have an instance variable ‘a’. Let’s pass the created object obj of class A to this function and take the return value of this function in a variable named obj2. &gt;&gt;&gt; obj2 = func(obj) &gt;&gt;&gt; print obj2.a 15 We wrote a function ‘func’ that takes an object as an argument, manipulates it and also returns that object. We passed around the object ‘obj’ of class A. In Python, functions are objects. They can be passed around similar to any other object. Let’s see this through an example. Let’s write a function that prints something. &gt;&gt;&gt; def hello_world(): ... print &quot;Hello World&quot; ... Use this function. &gt;&gt;&gt; hello_world() Hello World #output Since functions are objects they can be assigned to any variable. &gt;&gt;&gt; hello_world_two = hello_world We assigned hello_world, which is a function, to another variable named hello_world_two. Use hello_world_two &gt;&gt;&gt; hello_world_two() Hello World #It gives the same output as hello_world() Now we want to see how to pass around this function. For that, we want to write a new function that takes function ‘hello_world’ as an argument and then uses it. &gt;&gt;&gt; def use_hello_world(some_func): ... print &quot;This function takes a function as an argument and uses it&quot; ... print &quot;We will send function hello_world to this function as an argument and will use it in this function&quot; ... some_func() #This is a function call. So our assumption is &#39;some_func&#39; must be a function. ... Let’s use function use_hello_world. &gt;&gt;&gt; use_hello_world(hello_world) This function takes a function as an argument and uses it We will send function hello_world to this function as an argument and will use it in this function Hello World #This is because of the print stament we have in hello_world() ####What happened here? hello_world is the name of the first function we wrote. We wanted to see how to pass around functions. We wrote another function named use_hello_world. use_hello_world expects one argument. use_hello_world has three lines in its body. The first two lines of use_hello_world are just print staments. Third line of use_hello_world used the argument that it recieved. Notice the parenthesis after some_func. So. assumption with use_hello_world is that the argument that will be passed to it will be a function. ####Calling use_hello_world We passed one argument which is function hello_world to use_hello_world. In use_hello_world, received argument hello_world was assigned to variable named some_func. Two print statements in use_hello_world were printed. some_func which refers to the function pointed to by hello_world was called and the print statement in hello_world was executed. Also functions can be returned from another function. Let’s see it. &gt;&gt;&gt; def some_func(): ... print &quot;This function defines an inner function&quot; ... def say_hello(): ... print &quot;Hello Duniya&quot; ... print &quot;A function can be returned from a function&quot; ... return say_hello ... ####What happens in function some_func? First line is a print statement We define an inner function named say_hello inside this function. We have a print stament inside say_hello. Fourth line is a print statement of function some_func. say_hello has only one line in its body which is Hello Duniya We return function say_hello. Let’s see how say_hello can be used. &gt;&gt;&gt; abc = some_func() This function defines an inner function #output A function can be returned from a function #output ####What happened on calling some_func? As we call some_func, two print statements inside it gets executed. However, we do not see third line inside some_func i.e the print statement of say_hello in the output. This is because when we call some_func, the inner function inside it is only defined but it is not called. Last line of some_func returns the function defined inside it which is say_hello. Then this say_hello gets assigned to abc. Now abc and say_hello are referring to the same function. Using abc &gt;&gt;&gt; abc() Hello Duniya #output So now we are comfortable with passing functions as arguments as well as defining an inner function inside another function and returning it. ###Writing a simple decorator Decorators are functions that recieve a function as an argument and return another function as return value. Let’s first write a function without decorator. &gt;&gt;&gt; def divide(numerator, denominator): ... return numerator/denominator ... Let’s use this function few times. &gt;&gt;&gt; divide(4, 2) 2 #output &gt;&gt;&gt; divide(4, 0) Traceback (most recent call last): File &quot;&lt;ipython-input-11-9552c1bdcb43&gt;&quot;, line 1, in &lt;module&gt; divide(4, 0) File &quot;&lt;ipython-input-9-e63f86a52419&gt;&quot;, line 2, in divide return numerator/denominator ZeroDivisionError: integer division or modulo by zero So, our second run of divide() raised an error. We can fix it by having an if condition in divide() and making sure that the denominator is not zero. However here we want to understand decorators, so we will fix it using a decorator. We will see a practical use of decorator later. So, what we intend to do is, if the denominator is 0 then we do not perform the division and just return 0. If the denominator is not 0 then perform the division. Let’s write a decorator. We will go through every line of the decorator once we have defined the decorator, so just go ahead and define the decorator written below. &gt;&gt;&gt; def decorate(function_to_be_decorated): ... def another_function(num, den): ... if den==0: ... return 0 ... else: ... result = function_to_be_decorated(num, den) ... return result ... return another_function ####Explanation: As we said at beginning, a decorator is just a function which recieves a function as an argument and returns some other function as a return value. A decorator is just a function, so everything applicable to a function is applicable to a decorator. A decorator is a special type of function. We defined a function named decorate. It is a decorator as well but we will keep calling it as function for sometime. This function named decorate expects one argument to be passed to it as we can see from the signature of decorate. The argument that we pass to this function decorate will be captured in the variable function_to_be_decorated. The argument passed to decorate must be a function itself. (The assumption for a decorator is that we will pass a function as argument to it). Since a function will be passed as an argument to decorate, function_to_be_decorated will refer to that passed function. We define a function named another_function inside decorate. The purpose of writing this decorator is to help us fix function divide(). So the signature of another_function must match the signature of divide. Since divide has two parameters, so another_function must also have two parameters. We have named those parameters num and den. Ignore the body of another_function for now, we will come to it very soon. At the end we return function named another_function from decorate. So we see that a decorator also returns a function. And it returns the same function that it defined inside itself. So here we defined another_function inside our decorator decorate and returned that same function from the decorator. Read the first point again and verify that everything we said about decorators is true. Let’s use the decorator that we just defined. &gt;&gt;&gt; divide = decorate(divide) ####What happened when we wrote divide = decorate(divide)? #####Only concentrate on left hand side of this assignment for now i.e decorate(divide) part. We passed the function divide to decorator named decorate. In decorator decorate, function divide gets assigned to variable function_to_be_decorated. So function_to_be_decorated start referring to divide. Let’s start calling it old divide now. So, function_to_be_decorated refers to old divide. Old divide has only one statement in it which is “return numerator/denominator”. Make sure you understood this statement, we need it later. #####Talking about right hand side of this assignment. Whatever is returned from decorate is assigned to divide. decorate returns the reference to function named another_function, which gets assigned to divide. Now, divide starts referring to another_function and is no more referring to the version of divide as defined by us initially. But no worries, old/actual version of divide i.e the one which had only one statement “return numerator/denominator” is still being referenced by function_to_be_decorated. So, it is still reachable and usable. Using new divide. &gt;&gt;&gt; divide(4, 2) 2 #output ####Explanation: Now divide refers to another_function. So, calling divide actually calls another_function. another_function has parameters num and den. Passing the arguments, assigns 4 to num and 2 to den. We check if den equals 0. Here, den did not equal 0. So, we reach else part of another_function. In else part, we use function_to_be_decorated. But, remember function_to_be_decorated refers to older/actual version of divide. The arguments recieved in another_function i.e num and den are passed as it is to function_to_be_decorated i.e actual version of divide. So, 4 and 2 are passed to function_to_be_decorated i.e to old divide. In old divide 4 gets assigned to variable numerator and 2 gets assigned to variable denominator. And the actual version of divide just divides the numerator by denominator and returns it. We get the value returned from function_to_be_decorated i.e old divide into varaible result and return it from function another_function. Using new divide again. &gt;&gt;&gt; divide(4, 0) 0 #output ####Explanation: Passing the arguments, assigns 4 to num and 0 to den. We check if den equals 0. Here if condition evaluates to True and we return 0. So, here function_to_be_decorated i.e old divide was not called after we saw that variable den is 0. The part which had to be understood is done. If you have understood till here, everything here onwards is as easy as pie. Though we achieved what we wanted to, we did not use the decorator syntax for changing the behaviour of our original/old divide function. Let’s redefine divide so that it becomes as it was initially. &gt;&gt;&gt; def divide(numerator, denominator): ... return numerator/denominator Pass denominator as 0 to this function to verify that this doesn’t work. &gt;&gt;&gt; divide(4, 0) Traceback (most recent call last): File &quot;&lt;ipython-input-19-9552c1bdcb43&gt;&quot;, line 1, in &lt;module&gt; divide(4, 0) File &quot;&lt;ipython-input-18-e63f86a52419&gt;&quot;, line 2, in divide return numerator/denominator ZeroDivisionError: integer division or modulo by zero Earlier, to fix this thing we used “divide=decorate(divide)”. This time we will use the exact decorator syntax. Redefine divide &gt;&gt;&gt; @decorate ... def divide(numerator, denominator): ... return numerator/denominator Yes, you spotted it. We need to put @decorate above the function definition. Now try dividing by 0. &gt;&gt;&gt; divide(4, 0) 0 #output Voila, we fixed what we intended using decorator syntax. ####What is this @decorate? Interpretor comes across the statement @decorate. So, it knows the function which follows @decorate i.e function named divide needs to be decorated using the decorator named decorate. It reads the function definition on next line i.e function definition for divide and does the usual stuff as it does for any undecorated function. Nothing special happens at this stage. But once the function definition is read, interpreter will do an extra operation. It will execute one more statement after function definition. And the extra statement it executes is divide=decorate(divide). This is the step which we performed manually earlier when we were not using the decorator syntax. But with the decorator syntax, the interpreter takes care of that step for us. Let’s write one more decorator. This decorator needs to check that the denominator is greater than numerator and then only perform the division, otherwise division should not be performed and just return 0. Weird requirement, isn’t it? &gt;&gt;&gt; def decorate_den_less_than_num(function): ... print &quot;Decorator to check denominator less than numerator applied&quot; ... def check_den_less_than_num(num, den): ... if den&gt;num: ... print &quot;Denominator &gt; Numerator. So dont call the actual function&quot; ... return 0 ... else: ... print &quot;Denominator &lt;= Numerator. So call actual function&quot; ... return function(num, den) ... return check_den_less_than_num ... We wrote the decorator keeping in mind that this decorator has to be applied to a function which expects two arguments. So the function defined inside decorator i.e check_den_less_than_num should also take two arguments and then it should make proper check and based on that it should call the actual function. We have some print statements to see what happens at different stages. Let’s rewrite function divide applying the above written decorator to it. &gt;&gt;&gt; @decorate_den_less_than_num ... def divide(numerator, denominator): ... return numerator/denominator ... Decorator to check denominator less than numerator applied #output ####Why we got the output “Decorator to che………… applied” ? As we discussed, interpreter saw a decorator syntax above the function divide. It did nothing till the function body is defined. But after function body was defined, interpreter would have executed one more statement which is divide=decorate_den_less_than_num(divide). This would have made a call to decorate_den_less_than_num and so the body of decorate_den_less_than_num was executed and so we saw the print statement inside the decorator. Make some calls to divide to see how it behaves. &gt;&gt;&gt; divide(4, 2) Denominator &lt;= Numerator. So call actual function 2 &gt;&gt;&gt; divide(4, 5) Denominator &gt; Numerator. So dont call the actual function 0 I wanted this tutorial to be acesible to beginners so I was unable to do justice to this topic. I plan to write more about decorators. Please let me know if this would help you. Things I want to write about. Chaining decorators Understanding __call__ and class based decorators Some practical examples of decorator","author":{"@type":"Person","name":"akshar"},"@type":"BlogPosting","url":"http://localhost:4000/function/as/objects/2012/11/17/understanding-decorators-2.html","headline":"Understanding decorators","dateModified":"2012-11-17T14:43:53+05:30","datePublished":"2012-11-17T14:43:53+05:30","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/function/as/objects/2012/11/17/understanding-decorators-2.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

    <link rel="stylesheet" href="/assets/css/style.css?v=">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="/assets/js/respond.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="/assets/css/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <script>
    	function onPageLoad() {
    		var element = document.getElementById("content");
    		var childNodes = element.childElementCount;
    		if(childNodes > 0) {
    		 	element.scrollIntoView(); 
    	 	}

    	}
    </script>
    
  </head>
  <body onload="onPageLoad()"> 
      <div id="header">
        <nav>
          <li class="fork"><a href="">View On GitHub</a></li>
          <!-- 
            <li class="downloads"><a href="">ZIP</a></li>
            <li class="downloads"><a href="">TAR</a></li>
            <li class="title">DOWNLOADS</li>
           -->
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Agiliq Blogs</h1>
          <!-- <p>Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.</p> -->
          <hr>
          <span class="credits left">Project maintained by <a href="">Agiliq</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></span>
          <ul>
		  
		  <li>
		    <a href="/python/2018/01/21/prime-number-binary-trex.html" >Finding a prime number whose binary representation is a giraffe (or a T-Rex)</a>
		  </li>
		  
		  <li>
		    <a href="/django/2017/12/29/when-and-how-use-django-listview.html" >When and how to use Django ListView</a>
		  </li>
		  
		  <li>
		    <a href="/django/2017/12/29/when-and-how-use-django-templateview.html" >When and how to use Django TemplateView</a>
		  </li>
		  
		  <li>
		    <a href="/django/2017/12/11/adventures-in-advanced-django-orm-with-hyperloglog.html" >Adventures in advanced Django ORM with HyperLogLog</a>
		  </li>
		  
		  <li>
		    <a href="/django/2017/12/06/django-20-window-expressions-tutorial.html" >Django 2.0 Window expressions tutorial</a>
		  </li>
		  
		  <li>
		    <a href="/django/2017/12/02/configure-django-log-exceptions-production.html" >Configure Django to log exceptions in production</a>
		  </li>
		  
		  <li>
		    <a href="/gunicorn/2017/11/15/how-performant-your-python-web-application.html" >How performant is your Python web application</a>
		  </li>
		  
		  <li>
		    <a href="/python/2017/11/01/how-python-generators-are-similar-iterators.html" >How Python generators are similar to iterators</a>
		  </li>
		  
		  <li>
		    <a href="/python/2017/10/18/real-world-usage-iterators-and-iterables.html" >Real world usage of __iter__ and next</a>
		  </li>
		  
		  <li>
		    <a href="/python/2017/10/12/iterators-and-iterables.html" >Iterators and Iterables</a>
		  </li>
		  
		  <li>
		    <a href="/appengine/2017/09/04/getting-started-webapp2-and-gae.html" >Getting started with webapp2 and GAE</a>
		  </li>
		  
		  <li>
		    <a href="/angularjs/2017/04/30/why-angularjs-services-arent-available-configurati.html" >Why AngularJS services aren't available in configuration blocks</a>
		  </li>
		  
		  <li>
		    <a href="/angularjs/2017/04/27/what-when-and-how-angularjs-configuration-blocks.html" >What, when and how of AngularJS configuration blocks</a>
		  </li>
		  
		  <li>
		    <a href="/2017/04/26/trsfer-files-amzon-s3-using-browser-instead-server.html" >Transfer files to amazon s3 using browser instead of server</a>
		  </li>
		  
		  <li>
		    <a href="/angularjs/2017/04/25/angularjs-injectors-internals.html" >AngularJS injectors internals</a>
		  </li>
		  
		  <li>
		    <a href="/angularjs/2017/04/21/how-script-ordering-works-angular-app.html" >How script ordering works in an Angular app</a>
		  </li>
		  
		  <li>
		    <a href="/scrapy/2016/04/02/getting-started-with-python-scrapy.html" >Getting started with python scrapy</a>
		  </li>
		  
		  <li>
		    <a href="/celery/2015/08/03/retrying-celery-failed-tasks.html" >Retrying celery failed tasks</a>
		  </li>
		  
		  <li>
		    <a href="/middlewares/2015/07/17/profiling-django-middlewares.html" >Profiling Django Middlewares</a>
		  </li>
		  
		  <li>
		    <a href="/middlewares/2015/07/17/understanding-django-middlewares.html" >Understanding Django Middlewares</a>
		  </li>
		  
		  <li>
		    <a href="/redis/2015/07/06/getting-started-with-celery-and-redis.html" >Getting started with Celery and Redis</a>
		  </li>
		  
		  <li>
		    <a href="/django-tastypie/2015/03/29/tastypie-with-foreignkey.html" >Tastypie with ForeignKey</a>
		  </li>
		  
		  <li>
		    <a href="/redis/2015/03/26/getting-started-with-redis-py.html" >Getting started with redis-py</a>
		  </li>
		  
		  <li>
		    <a href="/django-tastypie/2015/03/23/getting-started-with-django-tastypie.html" >Getting started with Django tastypie</a>
		  </li>
		  
		  <li>
		    <a href="/google/2015/03/04/building-chrome-extensions.html" >Building Chrome Extensions</a>
		  </li>
		  
		  <li>
		    <a href="/disqus/2015/01/16/importing-your-old-comments-to-disqus-site.html" >Importing your old comments to Disqus site</a>
		  </li>
		  
		  <li>
		    <a href="/python/2014/12/08/how-not-knowing-encoding-can-trip-you.html" >How not knowing encoding can trip you</a>
		  </li>
		  
		  <li>
		    <a href="/python/2014/12/08/understanding-python-unicode-str-unicodeencodeerro.html" >Understanding Python unicode, str, UnicodeEncodeError and UnicodeDecodeError</a>
		  </li>
		  
		  <li>
		    <a href="/api/2014/12/04/building-a-restful-api-with-django-rest-framework.html" >Building a RESTful API with Django-rest-framework</a>
		  </li>
		  
		  <li>
		    <a href="/encoding/2014/11/19/character-encoding-and-unicode.html" >Character encoding and Unicode</a>
		  </li>
		  
		  <li>
		    <a href="/disqus/2014/11/17/disqus-and-disqus-sso.html" >Disqus and Disqus SSO</a>
		  </li>
		  
		  <li>
		    <a href="/http/client/2014/09/08/using-postman.html" >Using a Postman http client for efficient HTTP testing</a>
		  </li>
		  
		  <li>
		    <a href="/functional-testing/2014/09/02/advanced-functional-testing-with-selenium.html" >Advanced functional testing with Selenium in Django</a>
		  </li>
		  
		  <li>
		    <a href="/functional-testing/2014/09/01/selenium-testing.html" >Introduction to functional testing with Selenium in Django</a>
		  </li>
		  
		  <li>
		    <a href="/coveralls.io/2014/08/22/travis-and-coveralls-for-private-repo.html" >Travis and coveralls for private repo</a>
		  </li>
		  
		  <li>
		    <a href="/django/2014/08/20/django-timezones.html" >Django timezones</a>
		  </li>
		  
		  <li>
		    <a href="/django/app/deployment/2014/08/06/deploying-a-django-app-on-amazon-ec2-instance.html" >Deploying a Django app on Amazon EC2 instance.</a>
		  </li>
		  
		  <li>
		    <a href="/django/2014/08/05/passing-parameters-to-django-admin-action.html" >Passing parameters to Django admin action</a>
		  </li>
		  
		  <li>
		    <a href="/python/2014/07/15/method-decorators-in-python.html" >Method decorators in Python</a>
		  </li>
		  
		  <li>
		    <a href="/gunicorn/2014/06/05/minimal-gunicorn-configuration.html" >Minimal Gunicorn configuration</a>
		  </li>
		  
		  <li>
		    <a href="/heroku/2014/06/05/heroku-django-s3-for-serving-media-files.html" >Heroku Django S3 for serving Media files</a>
		  </li>
		  
		  <li>
		    <a href="/mysqltopostgres/2014/05/27/migrating-django-app-from-mysql-to-postgres.html" >Migrating django app from MySQL to Postgres</a>
		  </li>
		  
		  <li>
		    <a href="/google/2014/05/09/google-diff-match-patch-library.html" >Google diff match patch library</a>
		  </li>
		  
		  <li>
		    <a href="/supervisor/2014/05/09/supervisor-with-django-and-gunicorn.html" >Supervisor with Django and Gunicorn</a>
		  </li>
		  
		  <li>
		    <a href="/python/2014/05/05/python-requests.html" >Python-requests</a>
		  </li>
		  
		  <li>
		    <a href="/python/2014/05/01/three-underutilized-python-commands.html" >Three underutilized python commands</a>
		  </li>
		  
		  <li>
		    <a href="/travis/2014/05/01/continuous-integration-with-travis-and-coverallsio.html" >Continuous integration with travis and coveralls.io for Django apps</a>
		  </li>
		  
		  <li>
		    <a href="/django/2014/04/28/django-backward-relationship-lookup.html" >Django backward relationship lookup</a>
		  </li>
		  
		  <li>
		    <a href="/threads/2013/10/17/producer-consumer-problem-in-python.html" >Producer-consumer problem in Python</a>
		  </li>
		  
		  <li>
		    <a href="/design/pattern/2013/10/14/state-pattern-with-ui-code.html" >State pattern with UI Code</a>
		  </li>
		  
		  <li>
		    <a href="/threads/2013/09/17/understanding-threads-in-python.html" >Understanding Threads in Python</a>
		  </li>
		  
		  <li>
		    <a href="/process/2013/09/11/process-and-threads-for-beginners.html" >Process and Threads for Beginners</a>
		  </li>
		  
		  <li>
		    <a href="/nginx/2013/08/26/minimal-nginx-and-gunicorn-configuration-for-djang.html" >Minimal Nginx and Gunicorn configuration for Django projects</a>
		  </li>
		  
		  <li>
		    <a href="/threads/2013/08/21/writing-thread-safe-django-code.html" >Writing thread-safe django - get_or_create</a>
		  </li>
		  
		  <li>
		    <a href="/python/2013/07/12/accept-bitcoins-using-python.html" >Accept bitcoins using python</a>
		  </li>
		  
		  <li>
		    <a href="/python/2013/07/01/basics-wsgi.html" >Basics of WSGI</a>
		  </li>
		  
		  <li>
		    <a href="/docker/2013/06/28/self-testing-fabfile-using-docker.html" >Self-testing fabfile using docker</a>
		  </li>
		  
		  <li>
		    <a href="/docker/2013/06/14/deploying-django-using-docker.html" >Deploying django using docker</a>
		  </li>
		  
		  <li>
		    <a href="/testing/2013/04/28/common-testing-scenarios-for-django-app.html" >Common testing scenarios for Django app.</a>
		  </li>
		  
		  <li>
		    <a href="/static/2013/03/21/serving-static-files-in-django.html" >Serving static files in Django</a>
		  </li>
		  
		  <li>
		    <a href="/book/2013/02/11/two-scoops-of-django-review.html" >Two Scoops of Django: Review</a>
		  </li>
		  
		  <li>
		    <a href="/training/2013/02/08/introduction-to-python-workshop-on-february-15th-2.html" >Introduction to Python Workshop on February 15th, 2013</a>
		  </li>
		  
		  <li>
		    <a href="/django/2013/02/07/easy-client-side-form-validations-for-django-djang.html" >Easy client side form validations for Django: Django Parsley</a>
		  </li>
		  
		  <li>
		    <a href="/open-source/2013/01/21/moreapps-android-library-project-open-sourced.html" >MoreApps - Android Library Project: Open Sourced</a>
		  </li>
		  
		  <li>
		    <a href="/open-source/2013/01/15/password-generetor-app-open-sourced.html" >Password Generator App: Open Sourced</a>
		  </li>
		  
		  <li>
		    <a href="/open-source/2013/01/14/todo-list-app-open-sourced.html" >Todo List App: Open Sourced</a>
		  </li>
		  
		  <li>
		    <a href="/android/2013/01/01/android-fragments-101.html" >Android Fragments 101</a>
		  </li>
		  
		  <li>
		    <a href="/function/as/objects/2012/11/17/understanding-decorators-2.html" >Understanding decorators</a>
		  </li>
		  
		  <li>
		    <a href="/forms/2012/11/07/not-exactly-not-exactly-tim-the-enchanter.html" >Not exactly, not exactly tim the enchanter</a>
		  </li>
		  
		  <li>
		    <a href="/internals/2012/11/01/the-missing-documentation-for-djangoutilsdatastruc.html" >The missing documentation for django.utils.datastructures</a>
		  </li>
		  
		  <li>
		    <a href="/2012/09/06/dissecting-phonegaps-architecture.html" >Dissecting Phonegaps Architecture</a>
		  </li>
		  
		  <li>
		    <a href="/upload/2012/07/17/dropbox-file-upload-handler-for-django.html" >Dropbox file upload handler for django</a>
		  </li>
		  
		  <li>
		    <a href="/virtualization/2012/07/16/using-ubuntu-cloud-images-in-kvm.html" >Using Ubuntu cloud images in KVM</a>
		  </li>
		  
		  <li>
		    <a href="/metaclass/2012/07/02/metaclass-python.html" >Metaclass in Python</a>
		  </li>
		  
		  <li>
		    <a href="/virtualization/2012/06/25/libvirt-and-kvm.html" >Libvirt and KVM</a>
		  </li>
		  
		  <li>
		    <a href="/__new__/2012/06/10/__new__-python.html" >__new__() in python</a>
		  </li>
		  
		  <li>
		    <a href="/kwargs/2012/06/03/understanding-args-and-kwargs.html" >Understanding '*', '*args', '**' and '**kwargs'</a>
		  </li>
		  
		  <li>
		    <a href="/provisioning/2012/05/29/provisioning-made-easy-with-chef.html" >Provisioning Made Easy With Chef</a>
		  </li>
		  
		  <li>
		    <a href="/development/2012/05/02/test-driven-development-python.html" >Test Driven Development in Python </a>
		  </li>
		  
		  <li>
		    <a href="/terminal/2012/03/20/developing-android-applications-from-command-line.html" >Developing android applications from command line</a>
		  </li>
		  
		  <li>
		    <a href="/vps/2012/02/23/deploy-django-app-5-easy-steps.html" >Deploy Django App in 5 Easy Steps</a>
		  </li>
		  
		  <li>
		    <a href="/django/2012/02/22/deploying-django-apps-on-heroku.html" >Deploying Django apps on Heroku</a>
		  </li>
		  
		  <li>
		    <a href="/site_id/prefix/2012/02/05/dynamically-attaching-site_id-django-caching.html" > Dynamically attaching SITE_ID to Django Caching</a>
		  </li>
		  
		  <li>
		    <a href="/django/2012/02/04/deploying-django-apps-on-heroku-2.html" >Deploying Django apps on Heroku</a>
		  </li>
		  
		  <li>
		    <a href="/screencasts/2012/02/03/how-to-use-pep8py-to-write-better-django-code.html" >How to use pep8.py to write better Django code</a>
		  </li>
		  
		  <li>
		    <a href="/screencasts/2012/02/02/how-and-why-to-use-pyflakes-to-write-better-python.html" >How and why to use pyflakes to write better Python</a>
		  </li>
		  
		  <li>
		    <a href="/south/2012/01/09/south.html" >Getting started with South for Django DB migrations</a>
		  </li>
		  
		  <li>
		    <a href="/coffeescript/2012/01/06/writing-jquery-plugins-using-coffeescript.html" >Writing jQuery plugins using Coffeescript</a>
		  </li>
		  
		  <li>
		    <a href="/response/2012/01/02/behind-the-scenes-request-to-response.html" >Request to Response</a>
		  </li>
		  
		  <li>
		    <a href="/java/2011/12/28/using-sqlite-database-with-android.html" >Using SQLite Database with Android</a>
		  </li>
		  
		  <li>
		    <a href="/django/2011/12/25/haml-for-django-developers.html" >Haml for Django developers</a>
		  </li>
		  
		  <li>
		    <a href="/coffeescript/2011/12/24/coffeescript-for-python-programmers.html" >Coffeescript for Python programmers</a>
		  </li>
		  
		  <li>
		    <a href="/treeview/2011/10/12/how-use-jstree.html" >How to use jsTree</a>
		  </li>
		  
		  <li>
		    <a href="/upload/2011/09/21/behind-the-scenes-from-html-form-to-storage.html" >From HTML Form to Storage</a>
		  </li>
		  
		  <li>
		    <a href="/mysql/2011/07/01/setting-your-system-start-django-development-ubunt.html" >Setting up your system to start with Django development on Ubuntu:</a>
		  </li>
		  
		  <li>
		    <a href="/e-mail/2011/04/05/writing-an-e-mail-application-with-lamson-ii.html" >Writing an e-mail application with Lamson - II</a>
		  </li>
		  
		  <li>
		    <a href="/e-mail/2011/04/01/writing-an-e-mail-application-with-lamson-i.html" >Writing an e-mail application with Lamson - I</a>
		  </li>
		  
		  <li>
		    <a href="/jobs/2011/03/15/jobs.html" >Jobs</a>
		  </li>
		  
		  <li>
		    <a href="/java/2011/02/08/comparision-iphone-android-phonegap-titanium.html" >Comparison of mobile app frameworks: Iphone, Java, Phonegap and Titanium</a>
		  </li>
		  
		  <li>
		    <a href="/iphone/2011/02/08/getting-started-with-titanium-development.html" >Getting started with Titanium development for Android and Iphone</a>
		  </li>
		  
		  <li>
		    <a href="/android/2011/02/06/getting-started-with-phonegap-using-xcode-for-mobi.html" >Getting started with PhoneGap using Xcode for Mobile app development</a>
		  </li>
		  
		  <li>
		    <a href="/java/2011/02/06/starting-android-app-developement-from-zero-to-app.html" >Starting Android app developement: From zero to app</a>
		  </li>
		  
		  <li>
		    <a href="/mobile/applications/2011/02/03/iphoneandroid-application-development-using-titani.html" >iPhone and Android application development using Titanium</a>
		  </li>
		  
		  <li>
		    <a href="/linkroundup/2011/01/21/link-roundup-10.html" >Link roundup 10</a>
		  </li>
		  
		  <li>
		    <a href="/linkroundup/2011/01/07/link-roundup-9.html" >Link roundup 9</a>
		  </li>
		  
		  <li>
		    <a href="/reviews/2010/12/31/book-review-the-principles-of-beautiful-web-design.html" >Book Review: The Principles Of Beautiful Web Design</a>
		  </li>
		  
		  <li>
		    <a href="/linkroundup/2010/12/31/link-roundup-8.html" >Link roundup 8</a>
		  </li>
		  
		  <li>
		    <a href="/emacs/2010/12/27/django-emacs-setup.html" >Django emacs setup</a>
		  </li>
		  
		  <li>
		    <a href="/reviews/2010/12/26/book-review-pragmatic-guide-to-javascript.html" >Book Review: Pragmatic Guide to JavaScript</a>
		  </li>
		  
		  <li>
		    <a href="/reviews/2010/12/25/the-principles-of-successful-freelancing.html" >Book review: The Principles of Successful Freelancing</a>
		  </li>
		  
		  <li>
		    <a href="/reviews/2010/12/24/book-review-the-principles-of-project-management.html" >Book review: The Principles of Project Management</a>
		  </li>
		  
		  <li>
		    <a href="/reviews/2010/12/24/book-review-outsourcing-web-projects.html" >Book Review: Outsourcing Web Projects.</a>
		  </li>
		  
		  <li>
		    <a href="/linkroundup/2010/12/23/link-roundup-for-week-ending-24122010.html" >Link roundup for week ending 24/12/2010</a>
		  </li>
		  
		  <li>
		    <a href="/%0A2010-12-22-real-time-applications-with-django-xmpp-and-stroph.markdown/xmpp/2010/12/22/real-time-applications-with-django-xmpp-and-stroph.html" >Real time applications with Django, XMPP and StropheJS</a>
		  </li>
		  
		  <li>
		    <a href="/tips/2010/12/04/the-unfuddle-tutorial.html" >The Unfuddle Tutorial</a>
		  </li>
		  
		  <li>
		    <a href="/apps/2010/12/04/experiments-in-url-design.html" >Experiments in URL design.</a>
		  </li>
		  
		  <li>
		    <a href="/linkroundup/2010/11/26/link-roundup-for-week-ending-26112010.html" >Link roundup for week ending 26/11/2010</a>
		  </li>
		  
		  <li>
		    <a href="/linkroundup/2010/11/19/link-roundup-for-week-ending-19112010.html" >Link Roundup for week ending 19/11/2010</a>
		  </li>
		  
		  <li>
		    <a href="/linkroundup/2010/11/12/link-roundup-for-week-ending-12112010.html" >Link Roundup for week ending 12/11/2010</a>
		  </li>
		  
		  <li>
		    <a href="/python/2010/11/07/i-am-so-starving-same-web-app-in-various-python-we.html" >I am so starving: Web app in python frameworks.</a>
		  </li>
		  
		  <li>
		    <a href="/vim/2010/11/03/seven-reasons-why-you-should-switch-to-vim-for-dja.html" >Seven reasons why you should switch to Vim</a>
		  </li>
		  
		  <li>
		    <a href="/linkroundup/2010/11/03/link-roundup-for-week-ending-5112011.html" >Link Roundup for week ending 5/11/2011</a>
		  </li>
		  
		  <li>
		    <a href="/wordpress/2010/10/28/importing-wordpress.html" >Importing wordpress</a>
		  </li>
		  
		  <li>
		    <a href="/api/2010/10/25/getting-trending-github-projects-via.html" >Getting trending Github projects via YQL</a>
		  </li>
		  
		  <li>
		    <a href="/linkroundup/2010/10/22/link-roundup-for-week-ending-2.html" >Link Roundup for week ending 22/10/2010</a>
		  </li>
		  
		  <li>
		    <a href="/business/2010/10/18/essential-web-apps-to-run-a.html" >Essential web-apps to run a software business.</a>
		  </li>
		  
		  <li>
		    <a href="/opinion/2010/10/17/django-is-not-flexible.html" >Django is not flexible</a>
		  </li>
		  
		  <li>
		    <a href="/linkroundup/2010/10/15/link-roundup-for-week-ending.html" >Link Roundup for week ending 15/10/2010</a>
		  </li>
		  
		  <li>
		    <a href="/about/2010/06/08/moving-home.html" >Moving home</a>
		  </li>
		  
		  <li>
		    <a href="/uncategorized/2010/03/20/rails-and-django-commands-comparison-and-conversio.html" >Rails and Django commands : comparison  and conversion</a>
		  </li>
		  
		  <li>
		    <a href="/rails/2010/03/20/the-rails-and-django-models-layer-rosseta-stone.html" >The Rails and Django models layer Rosseta stone</a>
		  </li>
		  
		  <li>
		    <a href="/models/2010/01/18/doing-things-with-django-models-aka-django-models.html" >Doing things with Django models - aka - Django models tutorial</a>
		  </li>
		  
		  <li>
		    <a href="/about/2010/01/17/wordpress-and-django-best-buddies.html" >Wordpress and Django: best buddies</a>
		  </li>
		  
		  <li>
		    <a href="/tutorial/2010/01/14/doing-things-with-django-forms.html" >Doing things with Django forms</a>
		  </li>
		  
		  <li>
		    <a href="/apps/2010/01/07/django-forum.html" >django-forum</a>
		  </li>
		  
		  <li>
		    <a href="/uncategorized/2009/12/13/django-buzz.html" >Django-buzz</a>
		  </li>
		  
		  <li>
		    <a href="/tutorial/2009/12/12/using-bpython-shell-with-django-and-some-ipython-f.html" >Using bpython shell with django (and some Ipython features you should know)</a>
		  </li>
		  
		  <li>
		    <a href="/india/2009/12/10/fossin-2009-the-best-fossin-ever.html" >Foss.in 2009: The best foss.in. Ever. </a>
		  </li>
		  
		  <li>
		    <a href="/tutorial/2009/12/03/python-metaclasses-and-how-django-uses-them.html" >Python metaclasses and how Django uses them</a>
		  </li>
		  
		  <li>
		    <a href="/django/2009/12/03/django-quiz.html" >Django quiz</a>
		  </li>
		  
		  <li>
		    <a href="/python/2009/11/26/django-for-a-rails-developer.html" >Django for a Rails Developer</a>
		  </li>
		  
		  <li>
		    <a href="/uncategorized/2009/11/21/the-magic-of-metaclasses-in-python.html" >The magic of metaclasses in Python</a>
		  </li>
		  
		  <li>
		    <a href="/tutorial/2009/11/21/writing-your-own-template-loaders.html" >Writing your own template loaders</a>
		  </li>
		  
		  <li>
		    <a href="/tutorial/2009/11/11/django-gotchas.html" >Django gotchas </a>
		  </li>
		  
		  <li>
		    <a href="/uncategorized/2009/10/02/pycon-india-2009-a-review.html" >Pycon India 2009 : A Review</a>
		  </li>
		  
		  <li>
		    <a href="/tutorial/2009/09/18/beginning-python.html" >Beginning python</a>
		  </li>
		  
		  <li>
		    <a href="/yahoo/2009/08/27/django-socialauth-login-via-twitter-facebook-openi.html" >Django-SocialAuth - Login via twitter, facebook, openid, yahoo, google using a single app.</a>
		  </li>
		  
		  <li>
		    <a href="/rambling/2009/08/20/a-response-to-dropping-django.html" >A response to Dropping Django</a>
		  </li>
		  
		  <li>
		    <a href="/aggreagtion/2009/08/18/django-aggregation-tutorial.html" >Django aggregation tutorial</a>
		  </li>
		  
		  <li>
		    <a href="/tips/2009/07/16/on-captcha.html" >On Captcha</a>
		  </li>
		  
		  <li>
		    <a href="/book/2009/07/03/django-design-patterns.html" >Django design patterns</a>
		  </li>
		  
		  <li>
		    <a href="/django/2009/07/02/remote-debugging-debugging-pesky-server-only-bugs.html" >Remote debugging - debugging pesky server only bugs</a>
		  </li>
		  
		  <li>
		    <a href="/django/2009/06/25/django-request-response-processing.html" >Django Request Response processing</a>
		  </li>
		  
		  <li>
		    <a href="/python/2009/06/24/better-python-package-management-using-source-and.html" >Better Python package management using source and version control systems</a>
		  </li>
		  
		  <li>
		    <a href="/python/2009/06/23/understanding-decorators.html" >Understanding decorators</a>
		  </li>
		  
		  <li>
		    <a href="/algorithms/2009/06/16/generating-pseudo-random-text-with-markov-chains-u.html" >Generating pseudo random text with Markov chains using Python</a>
		  </li>
		  
		  <li>
		    <a href="/yahoo/2009/06/14/yahoo-boss-python-api.html" >Yahoo BOSS python api</a>
		  </li>
		  
		  <li>
		    <a href="/api/2009/06/10/python-wrapper-on-bing-api.html" >Python Wrapper on Bing API</a>
		  </li>
		  
		  <li>
		    <a href="/ecommerce/2009/03/31/exploring-authorizenet-payment-gateway-options-and.html" >Exploring Authorize.net Payment Gateway Options and integrating it with django</a>
		  </li>
		  
		  <li>
		    <a href="/satchmo/2009/03/26/create-your-own-online-store-in-few-hours-using-sa.html" >Create your own online store in few hours using satchmo (django)</a>
		  </li>
		  
		  <li>
		    <a href="/pinax/2009/03/18/create-a-new-social-networking-site-in-few-hours-u.html" >Create a new social networking site in few hours using pinax platform (django).</a>
		  </li>
		  
		  <li>
		    <a href="/uncategorized/2009/03/11/uswaretech-whitepapers.html" >Uswaretech whitepapers</a>
		  </li>
		  
		  <li>
		    <a href="/products/2009/03/11/django-subdomains-easily-create-subscription-based.html" >Django-subdomains - Easily create subscription based subdomains enabled webapps</a>
		  </li>
		  
		  <li>
		    <a href="/algorithms/2009/03/09/finding-keywords-using-python.html" >Finding keywords using Python</a>
		  </li>
		  
		  <li>
		    <a href="/business/2009/03/09/web-development-companies-working-with-django.html" >Web development companies working with Django</a>
		  </li>
		  
		  <li>
		    <a href="/presentations/2009/03/08/developing-a-web-application-live-in-15-min-in-dja.html" > Developing a Web Application Live in 15 min, in django framework</a>
		  </li>
		  
		  <li>
		    <a href="/algorithms/2009/03/06/constraint-programming-in-python.html" >Constraint programming in Python</a>
		  </li>
		  
		  <li>
		    <a href="/mysql/2009/03/06/django-with-mysql-and-apache-on-ec2.html" >Django with Mysql and Apache on EC2</a>
		  </li>
		  
		  <li>
		    <a href="/facebook/2009/02/20/how-to-build-a-facebook-app-in-django.html" >How to build a Facebook app in Django</a>
		  </li>
		  
		  <li>
		    <a href="/web2.0/2009/02/19/how-we-built-a-twitter-application.html" >How we built a Twitter Application</a>
		  </li>
		  
		  <li>
		    <a href="/paypal/2008/11/12/using-paypal-with-django.html" >Using Paypal with Django</a>
		  </li>
		  
		  <li>
		    <a href="/tips/2008/10/10/using-subdomains-with-django.html" >Using subdomains with Django</a>
		  </li>
		  
		  <li>
		    <a href="/forms/2008/10/10/dynamic-forms-with-django.html" >Dynamic forms with Django</a>
		  </li>
		  
		  <li>
		    <a href="/tips/2008/10/07/generating-pdfs-with-django.html" >Generating PDFs with Django </a>
		  </li>
		  
		  <li>
		    <a href="/interviews/2008/06/24/an-interview-with-adrian-holovaty-creator-of-djang.html" >An Interview with Adrian Holovaty - Creator of Django</a>
		  </li>
		  
		  <li>
		    <a href="/python/2008/05/30/an-interview-with-jacob-kaplan-moss-creator-of-dja.html" >An Interview with Jacob Kaplan-Moss - Creator of Django</a>
		  </li>
		  
		  <li>
		    <a href="/startup/2008/05/14/an-idea-a-day-a-geographical-wiki.html" >An idea a day - A geographical wiki</a>
		  </li>
		  
		  <li>
		    <a href="/startup/2008/05/13/an-idea-a-day-alternative-to-gae.html" >An idea a day - Alternative to GAE</a>
		  </li>
		  
		  <li>
		    <a href="/startup/2008/05/12/an-idea-a-day-remotely-hosted-analytics-solution.html" >An idea a day - Remotely hosted Analytics solution</a>
		  </li>
		  
		  <li>
		    <a href="/uncategorized/2008/05/12/popularising-django-part-2.html" >Popularising Django - Part 2</a>
		  </li>
		  
		  <li>
		    <a href="/startup/2008/05/11/an-idea-a-day-recomendation-system-based-ad-networ.html" >An idea a day - Recomendation system based ad network</a>
		  </li>
		  
		  <li>
		    <a href="/startup/2008/05/10/an-idea-a-day-an-automated-adwords-optimizer.html" >An idea a day - An automated Adwords optimizer</a>
		  </li>
		  
		  <li>
		    <a href="/search/2008/05/08/parable-of-the-single-sheep-or-how-google-is-destr.html" >Parable of the single sheep - Or How Google is destroying the internet, and nobody seems to know.</a>
		  </li>
		  
		  <li>
		    <a href="/marketing/2008/05/06/an-interview-with-michael-trier.html" >An interview with Michael Trier</a>
		  </li>
		  
		  <li>
		    <a href="/marketing/2008/05/06/popularizing-django-or-reusable-apps-considered-ha.html" >Popularizing Django -- Or Reusable apps considered harmful.</a>
		  </li>
		  
		  <li>
		    <a href="/interviews/2008/04/27/interview-with-james-bennett-django-release-manage.html" >Interview with James Bennett - Django release manager</a>
		  </li>
		  
		  <li>
		    <a href="/search/2008/04/22/parable-of-the-nofollow.html" >Parable of the nofollow</a>
		  </li>
		  
		  <li>
		    <a href="/startup/2008/04/22/why-people-start-startups.html" >Why people start startups.</a>
		  </li>
		  
		  <li>
		    <a href="/marketing/2008/04/21/marketing-lessons-from-google.html" >Marketing lessons from Google</a>
		  </li>
		  
		  <li>
		    <a href="/python/2008/04/18/five-things-i-hate-about-django.html" >Five Things I Hate About Django.</a>
		  </li>
		  
		  <li>
		    <a href="/startup/2008/04/12/first-step-to-startup-getting-your-pitch.html" >First step to startup - Getting your pitch</a>
		  </li>
		  
		  <li>
		    <a href="/python/2008/04/11/two-djangoappengine-tutorials.html" >Two Django+Appengine Tutorials</a>
		  </li>
		  
		  <li>
		    <a href="/python/2008/04/09/using-appengine-with-django-why-it-is-pretty-much.html" >Using Appengine with Django, why it is pretty much unusable</a>
		  </li>
		  
		  <li>
		    <a href="/python/2008/04/09/google-appengine-first-impressions.html" >Google Appengine - First Impressions</a>
		  </li>
		  
		</ul>
        </div>
        
        
        
      </section>
      <div id="content">
     	<p>Understanding decorators in Python</p>

<p>###We will divide this post into two topics</p>
<ol>
  <li>Functions are objects and they can be passed around.</li>
  <li>Writing few decorators</li>
</ol>

<p>As usual, I will be trying out the code in ipython and I suggest you to do the same.</p>

<p>###Functions can be passed around similar to any other object in Python.</p>

<p>If you are already familiar with this, you can skip to next section.</p>

<p>Let’s first write a class.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; class A(object):
...     def __init__(self, a):
...         self.a = a
...
</code></pre></div></div>

<p>Let’s create an instance of this class.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; obj = A(5)    
&gt;&gt;&gt; print obj.a
5                 #output
</code></pre></div></div>

<p>Let’s write a function that takes an object, increase the value of instance variable ‘a’ by 10 and return the object.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; def func(some_obj):
...     some_obj.a = some_obj.a + 10
...     return some_obj
... 
</code></pre></div></div>

<p>In function <strong>func</strong>, our assumption is that we will always pass it an object as argument and this object will have an instance variable ‘a’.</p>

<p>Let’s pass the created object <strong>obj</strong> of class A to this function and take the return value of this function in a variable named obj2.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; obj2 = func(obj)
&gt;&gt;&gt; print obj2.a
15
</code></pre></div></div>

<p>We wrote a function ‘func’ that takes an object as an argument, manipulates it and also returns that object. <strong>We passed around the object ‘obj’ of class A</strong>.</p>

<p>In Python, functions are objects. They can be passed around similar to any other object. Let’s see this through an example.</p>

<p>Let’s write a function that prints something.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; def hello_world():
...     print "Hello World"
...  
</code></pre></div></div>

<p>Use this function.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; hello_world()
Hello World            #output
</code></pre></div></div>

<p>Since functions are objects they can be assigned to any variable.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; hello_world_two = hello_world
</code></pre></div></div>

<p>We assigned hello_world, which is a function, to another variable named hello_world_two.</p>

<p>Use hello_world_two</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; hello_world_two()
Hello World             #It gives the same output as hello_world()
</code></pre></div></div>

<p>Now we want to see how to pass around this function.</p>

<p>For that, we want to write a new function that takes function ‘hello_world’ as an argument and then uses it.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; def use_hello_world(some_func):
...     print "This function takes a function as an argument and uses it"
...     print "We will send function hello_world to this function as an argument and will use it in this function"
...     some_func()          #This is a function call. So our assumption is 'some_func' must be a function.
...
</code></pre></div></div>

<p>Let’s use function <strong>use_hello_world</strong>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; use_hello_world(hello_world)
This function takes a function as an argument and uses it
We will send function hello_world to this function as an argument and will use it in this function
Hello World                 #This is because of the print stament we have in hello_world()
</code></pre></div></div>

<p>####What happened here?</p>
<ol>
  <li>hello_world is the name of the first function we wrote.</li>
  <li>We wanted to see how to pass around functions.</li>
  <li>We wrote another function named <strong>use_hello_world</strong>. use_hello_world expects one argument.</li>
  <li>use_hello_world has three lines in its body.</li>
  <li>The first two lines of use_hello_world are just print staments.</li>
  <li>Third line of use_hello_world used the argument that it recieved. Notice the <strong>parenthesis</strong> after <strong>some_func</strong>. So. assumption with use_hello_world is that the argument that will be passed to it will be a function.</li>
</ol>

<p>####Calling use_hello_world</p>
<ol>
  <li>We passed one argument which is function <strong>hello_world</strong> to <strong>use_hello_world</strong>.</li>
  <li>In use_hello_world, received argument hello_world was assigned to variable named some_func.</li>
  <li>Two print statements in use_hello_world were printed.</li>
  <li>some_func which refers to the function pointed to by hello_world was called and the print statement in hello_world was executed.</li>
</ol>

<p>Also functions can be returned from another function. Let’s see it.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; def some_func():
...     print "This function defines an inner function"
...     def say_hello():
...         print "Hello Duniya"
...     print "A function can be returned from a function"
...     return say_hello
... 
</code></pre></div></div>

<p>####What happens in function <strong>some_func</strong>?</p>
<ol>
  <li>First line is a print statement</li>
  <li>We define an inner function named <strong>say_hello</strong> inside this function.</li>
  <li>We have a print stament inside say_hello.</li>
  <li>Fourth line is a print statement of function some_func.</li>
  <li>say_hello has only one line in its body which is <strong>Hello Duniya</strong></li>
  <li>We return function <strong>say_hello</strong>.</li>
</ol>

<p>Let’s see how say_hello can be used.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; abc = some_func()
This function defines an inner function                             #output
A function can be returned from a function                          #output
</code></pre></div></div>

<p>####What happened on calling some_func?</p>
<ol>
  <li>As we call <strong>some_func</strong>, two print statements inside it gets executed.</li>
  <li>However, we do not see third line inside some_func i.e the print statement of <strong>say_hello</strong> in the output. This is because when we call some_func, the inner function inside it is only defined but it is not called.</li>
  <li>Last line of some_func returns the function defined inside it which is say_hello. Then this say_hello gets assigned to abc. Now abc and say_hello are referring to the same function.</li>
</ol>

<p>Using abc</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; abc()
Hello Duniya                                        #output
</code></pre></div></div>

<p>So now we are comfortable with passing functions as arguments as well as defining an inner function inside another function and returning it.</p>

<p>###Writing a simple decorator</p>

<p>Decorators are functions that recieve a function as an argument and return another function as return value.</p>

<p>Let’s first write a function without decorator.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; def divide(numerator, denominator):
...     return numerator/denominator
... 
</code></pre></div></div>

<p>Let’s use this function few times.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; divide(4, 2)
2                   #output

&gt;&gt;&gt; divide(4, 0)
Traceback (most recent call last):
  File "&lt;ipython-input-11-9552c1bdcb43&gt;", line 1, in &lt;module&gt;
    divide(4, 0)
  File "&lt;ipython-input-9-e63f86a52419&gt;", line 2, in divide
    return numerator/denominator
ZeroDivisionError: integer division or modulo by zero
</code></pre></div></div>

<p>So, our second run of divide() raised an error.</p>

<p>We can fix it by having an if condition in divide() and making sure that the denominator is not zero. However here we want to understand decorators, so we will fix it using a decorator. We will see a practical use of decorator later.</p>

<p>So, what we intend to do is, if the denominator is 0 then we do not perform the division and just return 0. If the denominator is not 0 then perform the division.</p>

<p>Let’s write a decorator. We will go through every line of the decorator once we have defined the decorator, so just go ahead and define the decorator written below.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; def decorate(function_to_be_decorated):
...     def another_function(num, den):
...         if den==0:
...             return 0
...         else:
...             result = function_to_be_decorated(num, den)
...             return result
...     return another_function
</code></pre></div></div>

<p>####Explanation:</p>
<ol>
  <li>As we said at beginning, a decorator is just a function which recieves a function as an argument and returns some other function as a return value.</li>
  <li>A decorator is just a function, so everything applicable to a function is applicable to a decorator. A decorator is a special type of function.</li>
  <li>We defined a function named <strong>decorate</strong>. It is a decorator as well but we will keep calling it as function for sometime.</li>
  <li>This function named decorate expects one argument to be passed to it as we can see from the signature of decorate.</li>
  <li>The argument that we pass to this function decorate will be captured in the variable function_to_be_decorated.</li>
  <li>The argument passed to decorate must be a function itself. (The assumption for a decorator is that we will pass a function as argument to it).</li>
  <li>Since a function will be passed as an argument to decorate, <strong>function_to_be_decorated</strong> will refer to that passed function.</li>
  <li>We define a function named <strong>another_function</strong> inside decorate.</li>
  <li>The purpose of writing this decorator is to help us fix function divide().</li>
  <li>So the signature of <strong>another_function</strong> must match the signature of <strong>divide</strong>. Since divide has two parameters, so another_function must also have two parameters. We have named those parameters num and den.</li>
  <li>Ignore the body of another_function for now, we will come to it very soon.</li>
  <li>At the end we return function named another_function from decorate. So we see that a decorator also returns a function. And it returns the same function that it defined inside itself. So here we defined another_function inside our decorator decorate and returned that same function from the decorator.</li>
  <li>Read the first point again and verify that everything we said about decorators is true.</li>
</ol>

<p>Let’s use the decorator that we just defined.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; divide = decorate(divide)
</code></pre></div></div>

<p>####What happened when we wrote divide = decorate(divide)?</p>

<p>#####Only concentrate on left hand side of this assignment for now i.e decorate(divide) part.</p>
<ol>
  <li>We passed the function <strong>divide</strong> to decorator named <strong>decorate</strong>.</li>
  <li>In decorator decorate, function divide gets assigned to variable function_to_be_decorated.</li>
  <li>So function_to_be_decorated start referring to divide. Let’s start calling it old divide now. So, function_to_be_decorated refers to old divide. Old divide has only one statement in it which is “return numerator/denominator”. Make sure you understood this statement, we need it later.</li>
</ol>

<p>#####Talking about right hand side of this assignment.</p>
<ol>
  <li>Whatever is returned from decorate is assigned to divide.</li>
  <li>decorate returns the reference to function named another_function, which gets assigned to divide. Now, divide starts referring to another_function and is no more referring to the version of divide as defined by us initially.</li>
  <li>But no worries, old/actual version of divide i.e the one which had only one statement “return numerator/denominator” is still being referenced by function_to_be_decorated. So, it is still reachable and usable.</li>
</ol>

<p>Using new divide.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; divide(4, 2)
2                                 #output
</code></pre></div></div>

<p>####Explanation:</p>
<ol>
  <li>Now divide refers to another_function.</li>
  <li>So, calling divide actually calls another_function.</li>
  <li>another_function has parameters num and den.</li>
  <li>Passing the arguments, assigns 4 to num and 2 to den.</li>
  <li>We check if den equals 0. Here, den did not equal 0. So, we reach else part of another_function.</li>
  <li>In else part, we use function_to_be_decorated. But, remember function_to_be_decorated refers to older/actual version of divide.</li>
  <li>The arguments recieved in another_function i.e num and den are passed as it is to function_to_be_decorated i.e actual version of divide.</li>
  <li>So, 4 and 2 are passed to function_to_be_decorated i.e to old divide.</li>
  <li>In old divide 4 gets assigned to variable numerator and 2 gets assigned to variable denominator.</li>
  <li>And the actual version of divide just divides the numerator by denominator and returns it.</li>
  <li>We get the value returned from function_to_be_decorated i.e old divide into varaible result and return it from function another_function.</li>
</ol>

<p>Using new divide again.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; divide(4, 0)
0                               #output
</code></pre></div></div>

<p>####Explanation:</p>
<ol>
  <li>Passing the arguments, assigns 4 to num and 0 to den.</li>
  <li>We check if den equals 0. Here if condition evaluates to True and we return 0.</li>
  <li>So, here function_to_be_decorated i.e old divide was not called after we saw that variable den is 0.</li>
</ol>

<p>The part which had to be understood is done. If you have understood till here, everything here onwards is as easy as pie.</p>

<p>Though we achieved what we wanted to, we did not use the decorator syntax for changing the behaviour of our original/old divide function.</p>

<p>Let’s redefine divide so that it becomes as it was initially.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; def divide(numerator, denominator):
...     return numerator/denominator
</code></pre></div></div>

<p>Pass denominator as 0 to this function to verify that this doesn’t work.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; divide(4, 0)
Traceback (most recent call last):
  File "&lt;ipython-input-19-9552c1bdcb43&gt;", line 1, in &lt;module&gt;
    divide(4, 0)
  File "&lt;ipython-input-18-e63f86a52419&gt;", line 2, in divide
    return numerator/denominator
ZeroDivisionError: integer division or modulo by zero
</code></pre></div></div>

<p>Earlier, to fix this thing we used “divide=decorate(divide)”. This time we will use the exact decorator syntax.</p>

<p>Redefine divide</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; @decorate
... def divide(numerator, denominator):
...     return numerator/denominator
</code></pre></div></div>

<p>Yes, you spotted it. We need to put @decorate above the function definition.</p>

<p>Now try dividing by 0.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; divide(4, 0)
0                                              #output
</code></pre></div></div>

<p>Voila, we fixed what we intended using decorator syntax.</p>

<p>####What is this @decorate?</p>
<ol>
  <li>Interpretor comes across the statement @decorate. So, it knows the function which follows @decorate i.e function named divide needs to be decorated using the decorator named decorate.</li>
  <li>It reads the function definition on next line i.e function definition for divide and does the usual stuff as it does for any undecorated function. Nothing special happens at this stage.</li>
  <li>But once the function definition is read, interpreter will do an extra operation. It will execute one more statement after function definition.</li>
  <li>And the extra statement it executes is <strong>divide=decorate(divide)</strong>. This is the step which we performed manually earlier when we were not using the decorator syntax. But with the decorator syntax, the interpreter takes care of that step for us.</li>
</ol>

<p>Let’s write one more decorator. This decorator needs to check that the denominator is greater than numerator and then only perform the division, otherwise division should not be performed and just return 0. Weird requirement, isn’t it?</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; def decorate_den_less_than_num(function):
...     print "Decorator to check denominator less than numerator applied"
...     def check_den_less_than_num(num, den):
...         if den&gt;num:
...             print "Denominator &gt; Numerator. So dont call the actual function"
...             return 0
...         else:
...             print "Denominator &lt;= Numerator. So call actual function"
...             return function(num, den)
...     return check_den_less_than_num
... 
</code></pre></div></div>

<p>We wrote the decorator keeping in mind that this decorator has to be applied to a function which expects two arguments. So the function defined inside decorator i.e check_den_less_than_num should also take two arguments and then it should make proper check and based on that it should call the actual function. We have some print statements to see what happens at different stages.</p>

<p>Let’s rewrite function divide applying the above written decorator to it.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; @decorate_den_less_than_num
... def divide(numerator, denominator):
...     return numerator/denominator
... 
Decorator to check denominator less than numerator applied     #output
</code></pre></div></div>

<p>####Why we got the output “Decorator to che………… applied” ?</p>
<ol>
  <li>As we discussed, interpreter saw a decorator syntax above the function divide.</li>
  <li>It did nothing till the function body is defined.</li>
  <li>But after function body was defined, interpreter would have executed one more statement which is <strong>divide=decorate_den_less_than_num(divide)</strong>. This would have made a call to decorate_den_less_than_num and so the body of decorate_den_less_than_num was executed and so we saw the print statement inside the decorator.</li>
</ol>

<p>Make some calls to divide to see how it behaves.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; divide(4, 2)
Denominator &lt;= Numerator. So call actual function
2

&gt;&gt;&gt; divide(4, 5)
Denominator &gt; Numerator. So dont call the actual function
0
</code></pre></div></div>

<p>I wanted this tutorial to be acesible to beginners so I was unable to do justice to this topic.  I plan to write more about decorators. Please let me know if this would help you. Things I want to write about.</p>

<ol>
  <li>Chaining decorators</li>
  <li>Understanding <code class="highlighter-rouge">__call__</code> and class based decorators</li>
  <li>Some practical examples of decorator</li>
</ol>


       </div>
    </div>

    
  </body>
</html>

